.\" Version: 0.180.0
.\"
.TH ocf_suse_SAPFilesystem 7 "05 Aug 2023" "" "OCF resource agents"
.\"
.SH NAME
SAPHanaFilesystem \- TODO.
.PP
.\"
.SH SYNOPSIS
\fBSAPHanaFilesystem\fP [start | stop | status | monitor | meta\-data | validate\-all | methods | usage ]
.PP
.\"
.SH DESCRIPTION
SAPHanaFilesystem is a resource agent (RA) that TODO 
.PP
The resource agent uses the following interfaces:
.PP
2. \fBhdbnsutil\fP
.br
The interface hdbnsutil is used to check the "topology" of the system
replication as well as the current configuration (primary/secondary) of a
SAP HANA database. A second task of the interface is the posibility to run
a system replication takeover (sr_takeover) or to register a former primary
to a newer one (sr_register). In scale-out setups, hdbnsutil sometimes
might take some time. SAPHanaTopology uses only task one. SAPHanaController 
is using all three tasks.
.PP
3. \fBTODO\fP
.br
Please see also the REQUIREMENTS section below.
.PP
.\"
.SH SUPPORTED PARAMETERS
This resource agent supports the following parameters:
.PP
\fBSID\fR
.RS 4
SAP System Identifier. Has to be same on both instances.
Example "SID=SLE".
.RE
.PP
\fBInstanceNumber\fR
.RS 4
Number of the SAP HANA database.
For system replication also Instance Number+1 is blocked.
Example "InstanceNumber=00".
.RE
.PP
\fBHANA_CALL_TIMEOUT\fR
.RS 4
Define timeout how long a call to HANA to receive information can take. This
could be e.g. landscapeHostConfiguration.py.
There are some specific calls to HANA which have their own timeout values.
For example the sr_takeover command does not timeout (inf).
If the timeout is reached, the return code will be 124. If you increase the
timeouts for HANA calls you should also adjust the operation timeouts of your
Linux cluster resources.
.br
Optional. Default value: TODO.
.RE
.PP
.\"
.SH SUPPORTED PROPERTIES
\fBhana_${sid}_glob_filter\fR
.RS 4
Global cluster property \fBhana_${sid}_glob_filter\fR . This property defines which messages are logged by the RA. It should only be set if requested by support engineers. The default is sufficient for normal operation.
.br
Message Types: [ act | dbg | dec | flow | top ]
.\" TODO dbg2?
.\" TODO message levels: (dbg)|info|warn|err|error
.br
ACT: Action. Start, stop, sr_takeover and others. See also section SUPPORTED ACTIONS.
.br
DBG: Debugging info. Usually not needed at customer site. See SUSE TID 7022678 for maximum RA tracing.
.br
DEC: Decision taken by the RA.
.br
FLOW: Function calls and the respective return codes.
.RE
.PP
.\"
.SH SUPPORTED ACTIONS
.br
This resource agent supports the following actions (operations):
.PP
\fBstart\fR
.RS 4
Sets the status of the clone to "started".
.RE
.PP
\fBstop\fR
.RS 4
Sets the status of the clone to "stopped".
.RE
.PP
\fBstatus\fR
.RS 4
Reports whether the monitored filesystem is accessible.
Suggested minimum timeout: 60\&.
.RE
.PP
\fBmonitor\fR
.RS 4
Analyses the nodes HANA roles and landscape status.
.\" TODO default timeout
Suggested minimum timeout: 300\&.
Suggested interval: 120\&.
.RE
.PP
\fBvalidate\-all\fR
.RS 4
Reports whether the parameters are valid.
Suggested minimum timeout: 5\&.
.RE
.PP
\fBmeta\-data\fR
.RS 4
Retrieves resource agent metadata (internal use only).
Suggested minimum timeout: 5\&.
.RE
.PP
\fBmethods\fR
.RS 4
Suggested minimum timeout: 5\&.
.RE
.PP
.\"
.SH RETURN CODES
The return codes are defined by the OCF cluster framework.
Please refer to the OCF definition on the website mentioned below.
.br
In addition return code 124 is used if HANA_CALL_TIMEOUT has been exceeded.
.PP
.\"
.SH EXAMPLES
* This is an example configuration for a SAPHanaFilesystem resource for HANA scale-up.
.RE
.PP
.RS 4
primitive rsc_SAPHanaFil_SLE_HDB00 ocf:suse:SAPHanaFilesystem \\
.br
op start interval="0" timeout="60" \\
.br
op stop interval="0" timeout="60" \\
.br
op monitor interval="120" timeout="300" \\
.br
params SID="SLE" InstanceNumber="00"
.PP
clone cln_SAPHanaFil_SLE_HDB00 rsc_SAPHanaFil_SLE_HDB00 \\
.br
notify="true" interleave="true" clone-node-max="1"
.RE
.PP
* Below is an example configuration for a SAPHanaFilesystem resource for HANA scale-out.
.br
The HANA consists of two sites with five nodes each. An additional cluster node
is used as majority maker for split brain situations.
.RE
.PP
.RS 4
primitive rsc_SAPHanaFil_SLE_HDB00 ocf:suse:SAPHanaFilesystem \\
.br
op start interval="0" timeout="60" \\
.br
op stop interval="0" timeout="60" \\
.br
op monitor interval="120" timeout="300" \\
.br
params SID="SLE" InstanceNumber="00"
.PP
clone cln_SAPHanaFil_SLE_HDB00 rsc_SAPHanaFil_SLE_HDB00 \\
.br
notify="true" interleave="true" clone-node-max="1"
.PP
location SAPHanaFil_not_on_majority_maker cln_SAPHanaFIL_SLE_HDB00 -inf: vm-majority
.RE
.PP
.\"
.SH FILES
.TP
/usr/lib/ocf/resource.d/suse/SAPHanaController
    the controller resource agent
.TP
/usr/lib/ocf/resource.d/suse/SAPHanaTopology
    the topology resource agent
.TP
/usr/lib/ocf/resource.d/suse/SAPHanaFilesystem
    the filesystem monitoring resource agent
.TP
$HA_RSCTMP/TODO
    the TODO poison pill file 
.\"
.PP
.SH REQUIREMENTS
For the current version of the SAPHanaFilesystem resource agent that comes with
the software package SAPHanaSR-angi, the support is limited
to the scenarios and parameters described in the respective manual page
SAPHanaSR-angi(7) and its references.
.PP
.\"
.SH SEE ALSO
\fBocf_suse_SAPHanaController\fP(7) , \fBocf_suse_SAPHanaTopology\fP(7) ,
\fBsusHanaSR.py\fP(7) , \fBSAPHanaSR-showAttr\fP(8) ,
\fBSAPHanaSR-angi\fP(7) , \fBSAPHanaSR\fP(7) , \fBSAPHanaSR-ScaleOut\fP(7) ,
.br
https://documentation.suse.com/sbp/all/?context=sles-sap ,
.PP
.\"
.SH AUTHORS
F.Herschel, L.Pinne.
.PP
.\"
.SH COPYRIGHT
.br
(c) 2023 SUSE LLC
.br
SAPHanaFilesystem comes with ABSOLUTELY NO WARRANTY.
.br
For details see the GNU General Public License at
http://www.gnu.org/licenses/gpl.html
.\"
